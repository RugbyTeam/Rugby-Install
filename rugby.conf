description "Runs Rugby Server"
author "Alex Gonzales"

start on (filesystem and networking) or runlevel[2]
stop on shutdown

 script 
    RUGBY_BASE_PATH="/opt"
    RUGBY_APP_ROOT="$RUGBY_BASE_PATH/Rugby-App"
    RUGBY_CORE="$RUGBY_APP/Rugby-Core"
    RUGBY_SERVER="$RUGBY_APP/Rugby-Server"
    RUGBY_LOGS="/var/logs/Rugby.log"

    export PYTHONPATH="/opt/RugbyApp/Rugby-Core"
    echo $$ > /var/run/rugby.pid
    exec /usr/bin/python "$RUGBY_SERVER/server.py" &> "$RUGBY_LOGS" 
end script

pre-start script
    echo "[$(date)] Starting Rugby" 
end script

pre-stop script
    rm /var/run/rugby.pid
    echo "[$(date)] Stopping Rugby"
end script
